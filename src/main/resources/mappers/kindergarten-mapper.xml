<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kindergartenMapper">
	<select id="selectMap" resultType="MapVO">
		SELECT KIND_NO kindNo
		,DIRECTOR_ID directorId
		,REGION_NAME regionName
		,KIND_ADDRESS kindAddress
		,KIND_NAME kindName
		,KIND_CONTACT kindContact
		,PLACE_X placeX
		,PLACE_Y placeY
		,STATUS
		FROM KINDERGARTEN
		WHERE STATUS = 'Y'
	</select>

	<select id="selectPet" parameterType="string" resultType="Pet">
		SELECT PET_NO petNo
		,BREED_NAME breed
		,PET_NAME petName
		,PET_AGE petAge
		,PET_GENDER petGender
		,WEIGHT weight
		FROM PET
		JOIN BREED USING (BREED_ID)
		WHERE OWNER_NO = #{ownerNo}
	</select>

	<select id="selectKindergarten" parameterType="_int"
		resultType="MapVO">
		SELECT KIND_NO kindNo
		,DIRECTOR_ID directorId
		,REGION_NAME regionName
		,KIND_ADDRESS kindAddress
		,KIND_NAME kindName
		,KIND_CONTACT kindContact
		,PLACE_X placeX
		,PLACE_Y placeY
		,STATUS
		FROM KINDERGARTEN
		WHERE KIND_NO = #{kindNo}
		AND STATUS = 'Y'
	</select>

	<insert id="insertReg" parameterType="Registration">
		INSERT INTO REGISTRATION(RESERV_NO
		,KIND_NO
		,PET_NO
		,USER_NO
		,VISIT_DATE
		,PET_INTRO
		,PET_NOTE
		,APPROVAL)
		VALUES (SEQ_REG.NEXTVAL
		,#{kindNo}
		,#{petNo}
		,#{userNo}
		,#{visitDate}
		,#{petIntro}
		,#{petNote}
		,DEFAULT
		)
	</insert>

	<select id="selectRegList" parameterType="string" resultType="Registration">
		SELECT RESERV_NO reservNo
		,KIND_NO kindNo
		,KIND_NAME kindName
		,PET_NO petNo
		,USER_NO userNo
		,VISIT_DATE visitDate
		,PET_INTRO petIntro
		,PET_NOTE petNote
		,APPROVAL approval
		FROM REGISTRATION
		JOIN KINDERGARTEN USING(KIND_NO)
		WHERE USER_NO = #{userNo}
	</select>












</mapper>